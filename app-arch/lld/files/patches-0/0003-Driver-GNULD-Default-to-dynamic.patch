From b53c4941ea28cf77a3cfc14dca780891d59c7597 Mon Sep 17 00:00:00 2001
From: Michael Spencer <bigcheesegs@gmail.com>
Date: Wed, 13 Feb 2013 15:18:24 -0800
Subject: [PATCH 03/13] [Driver][GNULD] Default to dynamic.

---
 lib/Driver/Drivers.cpp | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/lib/Driver/Drivers.cpp b/lib/Driver/Drivers.cpp
index 466b49e..76fd969 100644
--- a/lib/Driver/Drivers.cpp
+++ b/lib/Driver/Drivers.cpp
@@ -134,6 +134,13 @@ public:
       newArgs->AddJoinedArg(nullptr, _core.getOption(core::OPT_output),
                             "a.out");
 
+    if (llvm::opt::Arg *A = _inputArgs->getLastArg(ld::OPT_static))
+      newArgs->AddJoinedArg(A, _core.getOption(core::OPT_output_type),
+                            newArgs->MakeArgString("static"));
+    else
+      newArgs->AddJoinedArg(nullptr, _core.getOption(core::OPT_output_type),
+                            newArgs->MakeArgString("dynamic"));
+
     if (llvm::opt::Arg *A = _inputArgs->getLastArg(ld::OPT_relocatable))
       newArgs->AddFlagArg(A, _core.getOption(core::OPT_relocatable));
 
-- 
1.8.1.2

