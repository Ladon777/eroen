From 82c01b87a7fb4c72fccea79bb8892257607541b2 Mon Sep 17 00:00:00 2001
From: Michael Spencer <bigcheesegs@gmail.com>
Date: Thu, 14 Feb 2013 13:08:24 -0800
Subject: [PATCH 08/13] Correct alignment.

---
 lib/ReaderWriter/ELF/HeaderChunks.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/ReaderWriter/ELF/HeaderChunks.h b/lib/ReaderWriter/ELF/HeaderChunks.h
index 5130f5f..0d57172 100644
--- a/lib/ReaderWriter/ELF/HeaderChunks.h
+++ b/lib/ReaderWriter/ELF/HeaderChunks.h
@@ -215,7 +215,7 @@ bool ProgramHeader<ELFT>::addSegment(Segment<ELFT> *segment) {
       phdr.first->p_filesz = slice->fileSize();
       phdr.first->p_memsz = slice->memSize();
       phdr.first->p_flags = segment->flags();
-      phdr.first->p_align = slice->align2();
+      phdr.first->p_align = segment->pageSize();
     }
     auto phdr = allocateProgramHeader();
     if (phdr.second)
-- 
1.8.1.2

